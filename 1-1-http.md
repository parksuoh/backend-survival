# 1-1 HTTP의 이해

* 프로토콜이란 뭘까?&#x20;

프로토콜은 http통신을 이렇게하자\~ 라고 하는 약속 이다 서로 이 약속으로 통신을하여 데이터를 주고받는다.



* &#x20;애플리케이션 레이어에 대하여 알아보자

(2,3,4,7계층만)

2계층은 데이터 링크 계층이다 MAC address가 쓰인다

3계층은 네트워크 계층이다 IP address가 쓰인다 통신을할때 서로 ip주소를 알고있어야한다.

4계층은 전송계층이다 TCP UDP 통신을할때 사용하고 컴퓨터로들어오는 입구 Port number가 쓰인다

7계층은 응용계층이고 여기서 HTTP가 쓰인다 HTTPS를 위한 TLS같은 보안계층이 들어갈 수있음

&#x20;

* 클라이언트-서버 모델 + 메시지 교환

우리가 흔히 아는 URL을 통하여 클라이언트가 서버에 요청을 보내면 서버에스는 그요청을 처리하여 응답을 보내준다.

* 무상태

HTTP는 각각 요청이 독립적이어야 하며 클라이언트가 요청을할때 내가 누구인지 알려주어야한다.

서로 통신을 할때 쿠키를 주고 받을수도 있고 세션 localStorage 등 의 기능을 이용할수 있다.



* HTTP 메시지

HTTP메시지는 기본적으로 사람이 읽을 수 있는 형태이다.

요청과 응답이 동일한 구조를 가지면 Start line 만 형태가 다르다.

가장 위에 Start line이 오고 그 아래에는 Headers 가 오며 그다음 빈줄이온다.

빈줄을 지나면 body가 오는데 body는 크기를 알기 어려우므로 Headers에 있는 Content-Length을 활용한다. body에는 텍스트뿐만 아니라 여러가지 형태가 가능하다.  또한 하나뿐만 아니라 여러개를 담을수 있다.

&#x20;

* HTTP Method(요청)

GET 은  읽기를 가저오기위한 요청이다.

HEAD 는 GET요청에서 body가 빠진 형태의 요청이다.

POST 는 데이터를 보낼때 주로 사용한다. Create할때 주로사용된다.

PUT 은 업데이트를 위한요청이다. 주로 전체를 변경할때 사용한다.

PATCH 또한 업데이트를 위한 요청이다. 주로 부분을 변경할때 사용한다.

DELETE 는 말그대로 삭제를 요청할때 사용한다.

OPTION은 서버와 클라인터가 통신하기 위한 옵션확인을 위해 사용된다.



* HTTP Status Code(응답)

1xx&#x20;

2xx 은 성공 했을때 오는 응답 코드이다. 200 OK 201 Created 204 No Content 가 주로사용된다.

3xx 리다이렉션 할때 오는 응답 코드이다. 304 Not Modified가 사용된다.

4xx 클라이언트에서 문제 발생시 오는 응답 코드이다. 404 Not Found등이 사용된다.

5xx 서버 쪽 문제 일대 사용된다. 500 Internal Server Error 등이 사용된다.



* TCP/IP 통신
* TCP와 UDP

전송 계층의 대표적인 프로토콜에는 TCP와 UDP가 있다.

TCP는 서로 연결이 필요하며 전달 및 순서를 보장해준다.

UDP는 연결이 되어있지 않아도 데이터를 보내며 전달 및 순서를 보장해주지 않는다.



* Socket

Socket과 SocktAPI는 별개 이다.

Socket은 기본적으로 파일과 유사하게 다룰 수 있다.

Java에서는 Stream으로 다룰수있다. 이때 Stream은 java8에서 도입된 StreamAPI와는 별개이다.



* TCP 통신 순서

서버는 접속을 요청받을수있어야 하므로 소켓을 열어둔다. 클라이언트는 소캣을 만들어서 서버에 접속을 요청한후 서버에서는 그 접속을 요청받아서 클라이언트와 통신을 할 소켓을 따로 만들어둔다. 그러면 그소켓을 통하여 서로 데이터를 주고 받는다. 통신이 끝나면 소켓을 닫는다.



